---
ms.openlocfilehash: bd96d4c9278b37a2a3626abd3bd91dd20a15e2e1
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052861"
---
<a name="https-proxy-agent"></a>https-proxy-agent
================
### <a name="an-https-proxy-httpagent-implementation-for-https"></a>Una implementación de `http.Agent`proxy HTTP(s) para HTTP
[![Estado de compilación](https://github.com/TooTallNate/node-https-proxy-agent/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-https-proxy-agent/actions?workflow=Node+CI)

Este módulo proporciona una implementación `http.Agent` que se conecta a un servidor proxy HTTP o HTTPS especificado y se puede usar con el módulo integrado `https`.

En concreto, esta implementación `Agent` se conecta a un servidor "proxy" intermediario y emite el [método HTTP CONNECT][CONNECT], que indica al proxy que abra una conexión TCP directa al servidor de destino.

Dado que este agente implementa el método HTTP CONNECT, también funciona con otros protocolos que usan este método al conectarse a través de servidores proxy (por ejemplo, WebSockets).
Para obtener más información, consulte la sección "Ejemplos" a continuación.


<a name="installation"></a>Instalación
------------

Instalación con `npm`:

``` bash
$ npm install https-proxy-agent
```


<a name="examples"></a>Ejemplos
--------

#### <a name="https-module-example"></a>Ejemplo de módulo `https`

``` js
var url = require('url');
var https = require('https');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// HTTPS endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'https://graph.facebook.com/tootallnate';
console.log('attempting to GET %j', endpoint);
var options = url.parse(endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var agent = new HttpsProxyAgent(proxy);
options.agent = agent;

https.get(options, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

#### <a name="ws-websocket-connection-example"></a>Ejemplo de conexión WebSocket `ws`

``` js
var url = require('url');
var WebSocket = require('ws');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// WebSocket endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'ws://echo.websocket.org';
var parsed = url.parse(endpoint);
console.log('attempting to connect to WebSocket %j', endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var options = url.parse(proxy);

var agent = new HttpsProxyAgent(options);

// finally, initiate the WebSocket connection
var socket = new WebSocket(endpoint, { agent: agent });

socket.on('open', function () {
  console.log('"open" event!');
  socket.send('hello world');
});

socket.on('message', function (data, flags) {
  console.log('"message" event! %j %j', data, flags);
  socket.close();
});
```

<a name="api"></a>API
---

### <a name="new-httpsproxyagentobject-options"></a>new HttpsProxyAgent(Object options)

La clase `HttpsProxyAgent` implementa una subclase `http.Agent` que se conecta al "servidor proxy HTTP(s)" especificado para HTTPS proxy o solicitudes WebSocket. Esto se logra mediante el uso del comando [método `CONNECT`HTTP][CONNECT].

El argumento `options` puede ser un URI de cadena del servidor proxy que se va a usar o un objeto "options" con propiedades más específicas:

  * `host` - Cadena: host proxy al que conectarse (también puede usar `hostname`). Necesario.
  * `port` - Número: puerto proxy al que conectarse. Necesario.
  * `protocol` - Cadena: si es `https:`, use TLS para conectarse al proxy.
  * `headers` - Objeto: encabezados HTTP adicionales que se van a enviar en el método HTTP CONNECT.
  * Las demás opciones dadas se pasan a las funciones `net.connect()`/`tls.connect()`.


<a name="license"></a>Licencia
-------

(La licencia MIT)

Copyright (c) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

Se concede permiso libre de cargos a cualquier persona que obtenga una copia de este software y de los archivos de documentación asociados (el "software") para utilizar el software sin restricciones, lo que incluye, a título enunciativo y no limitativo, derechos para usar, copiar, modificar, combinar, publicar, distribuir, sublicenciar o vender copias del software, así como permitir hacerlo a las personas a las que se proporcione el software, siempre que se cumplan las siguientes condiciones:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

EL SOFTWARE SE PROPORCIONA "TAL CUAL", SIN NINGÚN TIPO DE GARANTÍA EXPLÍCITA O IMPLÍCITA INCLUIDAS, SIN LIMITACIÓN, LAS GARANTÍAS DE COMERCIABILIDAD, IDONEIDAD PARA UN DETERMINADO FIN Y AUSENCIA DE INFRACCIÓN.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

[CONNECT]: http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_Tunneling
