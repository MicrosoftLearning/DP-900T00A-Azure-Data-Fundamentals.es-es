---
ms.openlocfilehash: 05bea0332c8376e66d4aed62eab42a50c744536d
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052629"
---
# <a name="microsoft-authentication-library-for-node-msal-node"></a>Biblioteca de autenticación de Microsoft para Node (msal-node)

[![versión npm](https://img.shields.io/npm/v/@azure/msal-node.svg?style=flat)](https://www.npmjs.com/package/@azure/msal-node/)[![versión npm](https://img.shields.io/npm/dm/@azure/msal-node.svg)](https://nodei.co/npm/@azure/msal-node/)[![estado de cobertura](https://coveralls.io/repos/github/AzureAD/microsoft-authentication-library-for-js/badge.svg?branch=dev)](https://coveralls.io/github/AzureAD/microsoft-authentication-library-for-js?branch=dev)

| <a href="https://docs.microsoft.com/azure/active-directory/develop/guidedsetups/active-directory-javascriptspa" target="_blank">Introducción</a> | <a href="https://aka.ms/aaddevv2" target="_blank">Documentos de AAD</a> | <a href="https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_node.html" target="_blank">Referencia de la biblioteca</a> |
| --- | --- | --- |

Actualmente `msal-node` está en desarrollo, realice un seguimiento del progreso del proyecto [aquí](https://github.com/AzureAD/microsoft-authentication-library-for-js/projects/4). Esta documentación también está en curso y cambiará a medida que publiquemos nuestras `alpha` revisiones. **Aún no se recomienda usarlo en un entorno de producción**.

1. [Acerca de](#about)
2. [P+F](#faq)
3. [Versiones](#releases)
4. [Requisitos previos](#prerequisites)
5. [Instalación](#installation)
6. [Uso](#usage)
7. [Muestras](#samples)
8. [Biblioteca de compilación](#build-and-test)
9. [Informes de seguridad](#security-reporting)
10. [Licencia](#license)
11. [Código de conducta](#we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct)

## <a name="about"></a>Información

MSAL Node permite a las aplicaciones autenticar a los usuarios mediante cuentas profesionales y educativas de [Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview) (AAD), cuentas personales de Microsoft (MSA) y proveedores de identidades sociales como Facebook, Google, LinkedIn, cuentas Microsoft, etc. a través del servicio [Azure AD B2C](https://docs.microsoft.com/en-us/azure/active-directory-b2c/active-directory-b2c-overview#identity-providers). También permite que la aplicación obtenga tokens para acceder a los servicios de [Microsoft Cloud](https://www.microsoft.com/enterprise), como [Microsoft Graph](https://graph.microsoft.io).


### <a name="oauth20-grant-types-supported"></a>Tipos de concesión de OAuth2.0 admitidos:

La versión alfa actual admite las siguientes formas de adquirir tokens:

#### <a name="public-client"></a>Cliente público:
- [Concesión de código de autorización](https://oauth.net/2/grant-types/authorization-code/) con [PKCE](https://oauth.net/2/pkce/)
- [Concesión de código de dispositivo](https://oauth.net/2/grant-types/device-code/)
- [Concesión de tokens de actualización](https://oauth.net/2/grant-types/refresh-token/)
- [Flujo silencioso](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)

#### <a name="confidential-client"></a>Cliente confidencial:
- [Concesión de código de autorización](https://oauth.net/2/grant-types/authorization-code/) con una credencial de cliente
- [Concesión de tokens de actualización](https://oauth.net/2/grant-types/refresh-token/)
- [Flujo silencioso](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)
- [Concesión de credenciales de cliente](https://oauth.net/2/grant-types/client-credentials/)
- [Flujo en nombre de](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow)

**[Próximamente]** En el futuro, tenemos previsto agregar compatibilidad con:
- [Flujo de autenticación integrada de Windows](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#integrated-windows-authentication)
- [Flujo de nombre de usuario y contraseña](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword)

Puede encontrar más detalles sobre los diferentes tipos de concesión admitidos por las bibliotecas de autenticación de Microsoft en general [aquí](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows).

### <a name="scenarios-supported"></a>Escenarios admitidos:

Los escenarios admitidos con esta biblioteca son:
- Aplicación de escritorio que llama a las API web
- Aplicación web que llama a las API web
- API web que llaman a una API web
- Aplicaciones de demonio

Puede encontrar más detalles sobre los escenarios y los flujos de autenticación que se asignan a cada uno de ellos [aquí](https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios).

## <a name="faq"></a>Preguntas más frecuentes

Consulte [aquí](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/faq.md).

## <a name="prerequisites"></a>Prerrequisitos

Antes de usar `@azure/msal-node`, deberá registrar la aplicación en Azure Portal:

- [Registro de aplicaciones](https://docs.microsoft.com/en-us/graph/auth-register-app-v2)

## <a name="installation"></a>Instalación

### <a name="via-npm"></a>A través de NPM:
```javascript
npm install @azure/msal-node
```
##  <a name="usage"></a>Uso

### <a name="msal-basics"></a>Aspectos básicos de MSAL
- [Comprender la diferencia entre el cliente público y los clientes confidenciales](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications)
- [Inicializar una aplicación cliente pública](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-public-client-application.md)
- [Inicializar una aplicación cliente confidencial](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-confidential-client-application.md)
- [Configuración](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/configuration.md)
- [Solicitud](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/request.md)
- [Respuesta](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/response.md)

## <a name="samples"></a>Ejemplos
Hay varios [ejemplos](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples) incluidos en el repositorio que usan el nodo MSAL para adquirir tokens. Actualmente, estas muestras se usan para pruebas manuales y no están pensadas para ser una referencia de procedimientos recomendados, por ello, debe aplicar su criterio y no copiar este código en ninguna aplicación de producción sin analizarlo con detenimiento.

- [auth-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/auth-code): Aplicación rápida con flujo de código de autorización de OAuth 2.0.
- [device-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/device-code): Aplicación de línea de comandos con flujo de código de dispositivo de OAuth 2.0.
- [refresh-token](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/refresh-token): Aplicación de línea de comandos con flujo de actualización de OAuth 2.0.
- [silent-flow](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/silent-flow): Aplicación rápida que usa el flujo de código de autorización de OAuth2.0 para adquirir un token y almacenarlo en la caché de tokens y el flujo silencioso para usar tokens en la caché de tokens.
- [client-credentials](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/client-credentials): Aplicación de demonio con la concesión de credenciales de cliente de Oauth 2.0 para adquirir un token.
- [on-behalf-of](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/on-behalf-of): La aplicación web usa el flujo de código de autenticación de Oauth 2.0 para adquirir un token para una API web. La API web valida el token y llama a Microsoft Graph en nombre del usuario que se autentica en la aplicación web.
- [msal-node-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/samples/msal-node-extensions): Usa el flujo de código de autorización para adquirir tokens y la biblioteca [msal-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/) para escribir la caché de tokens en memoria de MSAL en el disco.

## <a name="build-and-test"></a>Compilar y probar

- Si no tiene[lerna](https://github.com/lerna/lerna) instalada, ejecute `npm install -g lerna`
- Ejecute `lerna bootstrap` desde cualquier lugar dentro de `microsoft-authentication-library-for-js.git`.
- Vaya a `microsoft-authentication-library-for-js/lib/msal-common` y ejecute `npm run build`
- Vaya a `microsoft-authentication-library-for-js/lib/msal-node` y ejecute `npm run build`

```javascript
// to link msal-node and msal-common packages
lerna bootstrap

// Change to the msal-node package directory
cd lib/msal-common/

// To run build only for node package
npm run build

// Change to the msal-node package directory
cd lib/msal-node/

// To run build only for node package
npm run build
```

### <a name="local-development"></a>Desarrollo local
A continuación se muestra una lista de comandos que probablemente le resultarán útiles:

#### `npm run build:modules:watch`
Ejecuta el proyecto en modo de desarrollo o inspección. El proyecto se volverá a generar en los cambios. TSDX tiene un registrador especial para su comodidad. Los mensajes de error se imprimen y formatean para la pestaña Problemas de VS Code de compatibilidad. Se volverá a generar la biblioteca si realiza modificaciones.

#### `npm run build`
Agrupa el paquete en la carpeta `dist`.
El paquete está optimizado y se agrupa con acumulación en varios formatos (CommonJS, UMD y ES Module).

#### `lerna bootstrap`
Si está ejecutando el proyecto en modo de desarrollo o inspección, o ha realizado cambios en `msal-common` y necesita que se reflejen en el proyecto, ejecute `lerna bootstrap` para vincular todos los símbolos. Tenga en cuenta que `npm install` desvinculará todo el código, por lo tanto, se recomienda ejecutar `lerna bootstrap` después de la instalación.

#### `npm run lint`
Ejecuta eslint con Prettier

#### <a name="npm-test-npm-run-testcoverage-npm-run-testwatch"></a>`npm test`, `npm run test:coverage`, `npm run test:watch`
Ejecuta el monitor de prueba (Jest) en un modo interactivo.
De forma predeterminada, ejecuta pruebas relacionadas con los archivos que han cambiado desde la última confirmación.
Genere cobertura de código agregando la marca --cobertura. Sin necesidad de configuración adicional. Jest puede recopilar información de cobertura de código de proyectos completos, incluidos los archivos no probados.

## <a name="security-reporting"></a>Informes de seguridad

Si encuentra un problema de seguridad con nuestras bibliotecas o servicios, notifiquelo a [secure@microsoft.com](mailto:secure@microsoft.com) con la mayor cantidad de detalles posible. Su envío puede ser elegible para una recompensa a través del programa de [recompensas de Microsoft](http://aka.ms/bugbounty). No publique problemas de seguridad en Problemas de GitHub ni en ningún otro sitio público. Nos pondremos en contacto con usted a la mayor brevedad posible después de recibir la información. Le animamos a que obtenga notificaciones de los incidentes de seguridad que se produzcan; para ello, visite [esta página](https://technet.microsoft.com/security/dd252948) y suscríbase a las alertas de avisos de seguridad.

## <a name="license"></a>Licencia

Copyright (c) Microsoft Corporation.  Todos los derechos reservados. Autorización sujeta a la licencia MIT.

## <a name="we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct"></a>Valoramos el código de conducta de código abierto de Microsoft y nos adherimos a él

El proyecto ha adoptado el [Código de conducta de código abierto de Microsoft](https://opensource.microsoft.com/codeofconduct/). Para más información, consulte las [preguntas más frecuentes del código de conducta](https://opensource.microsoft.com/codeofconduct/faq/) o póngase en contacto con [opencode@microsoft.com](mailto:opencode@microsoft.com) si tiene cualquier otra pregunta o comentario.

