---
ms.openlocfilehash: 81fd1455668c9343defe69cbbbff10d48b1f97ef
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052869"
---
<a name="gauge"></a>medidor
=====

Una barra de progreso o medidor horizontal basado en terminales casi sin estado.

```javascript
var Gauge = require("gauge")

var gauge = new Gauge()

gauge.show("test", 0.20)

gauge.pulse("this")

gauge.hide()
```

![](gauge-demo.gif)


### <a name="changes-from-1x"></a>CAMBIOS DESDE LA VERSIÓN 1.x

El medidor 2.x es una versión importante; consulte el [registro de cambios] para obtener más información sobre lo que ha cambiado si anteriormente era un usuario de este módulo.

[registro de cambios]: CHANGELOG.md

### <a name="the-gauge-class"></a>CLASE DE MEDIDOR

Esta es la interfaz típica del módulo: proporciona una interfaz de activación bastante sencilla y rápida para mostrar la información de estado.

```
var Gauge = require("gauge")

var gauge = new Gauge([stream], [options])
```

* **stream** : *(opcional, STDERR predeterminado)* Una secuencia en la que se van a escribir las actualizaciones de la barra de progreso.  El medidor respeta la presión inversa y pausará la mayoría de la escritura si se indica.
* **options** : *(opcional)* Un objeto option.

Construye un nuevo medidor. Los medidores se dibujan en una sola línea, y no se dibujan si la **secuencia** no es un tty y no se proporciona explícitamente un tty.

Si **stream** es un terminal o si pasa **tty** a **options**, detectaremos los cambios de tamaño del terminal y se volverán a dibujar para que se ajusten.  Para ello, observamos los eventos `resize` en el tty  (para solucionar un error en versiones de Node anteriores a la 2.5.0, los observamos en stdout si el tty es stderr). El cambio a tamaños de ventana más grandes será fluido, pero al reducir la ventana, siempre se producirá algún error.

**IMPORTANTE:** Si estaba pasando previamente una secuencia no tty, pero todavía quiere la salida (por ejemplo, una secuencia ajustada por el módulo `ansi`), debe pasar la opción **tty** siguiente, ya que `gauge` necesita acceso a la base de datos subyacente para hacer cosas como cambiar el tamaño del terminal y la detección del ancho del terminal.

El objeto **options** puede tener las siguientes propiedades, todas ellas opcionales:

* **updateInterval**: se debe extraer la frecuencia con la que se actualiza el medidor en milisegundos.
* **fixedFramerate**: se establece en false de manera predeterminada en el nodo 0.8 y true en cualquier otro.  Cuando es true, se crea un temporizador para desencadenar la acción una vez cada `updateInterval` ms; cuando es false, las actualizaciones se imprimen en cuanto entran, pero las actualizaciones con una frecuencia mayor que `updateInterval` se omiten.  La razón por la que el nodo 0.8 no tiene este valor establecido en true es porque no puede `unref` su temporizador y, por lo tanto, impediría que el programa salga. Si desea usar esta característica con 0.8, simplemente asegúrese de llamar a `gauge.disable()` para que el programa salga.
* **themes**: un conjunto de temas que aparece al seleccionar el tema que desea usar. El valor predeterminado es `gauge/themes`; consulte la documentación sobre [temas] para obtener más información.
* **theme**: seleccione el tema que desea usar; puede ser un
  * objeto theme, en cuyo caso no se usa **themes**.
  * Nombre de un tema, que se buscará en el objeto *themes* actual.
  * Objeto de configuración con cualquiera de las claves `hasUnicode`, `hasColor` o `platform`, que se usará para invalidar nuestras estimaciones al realizar una selección de tema predeterminado.

  Si no se selecciona ningún tema, se selecciona un valor predeterminado mediante una combinación de nuestras mejores suposiciones en el sistema operativo, la compatibilidad con colores y la compatibilidad con unicode.
* **template**: describe la apariencia que desea que tenga su medidor.  El valor predeterminado es el que se usa en npm.  Se incluye [documentación] detallada más adelante en este documento.
* **hideCursor**: el valor predeterminado es true.  Si es true, el cursor se ocultará mientras se muestra el medidor.
* **tty**: el tty en el que está escribiendo en última instancia.  El valor predeterminado es el mismo que el de **stream**.  Se usa para detectar el ancho del terminal y los cambios de tamaño. El ancho utilizado es `tty.columns - 1`. Si no hay ningún elemento tty disponible, se supone un ancho de `79`.
* **enabled**: el valor predeterminado es true si `tty` es un TTY; de lo contrario, es false.  Si es true, el medidor se habilita.  Si se deshabilita, se omiten todos los comandos de actualización y no se imprimirá ningún medidor hasta que llame a `.enable()`.
* **Plumbing**: la clase que se debe usar para generar el medidor que se va a imprimir.  Su valor predeterminado es `require('gauge/plumbing')` y normalmente no es necesario invalidarlo.
* **cleanupOnExit**: el valor predeterminado es true. Normalmente registramos un controlador de salida para asegurarnos de que el cursor está restaurado y la barra de progreso se borra cuando se cierra el proceso, incluso si presiona Ctrl-C o se cierra inesperadamente. Puede deshabilitarlo para no registrar el controlador de salida.

[has-unicode]: https://www.npmjs.com/package/has-unicode
[themes]: #themes
[documentación]: #templates

#### `gauge.show(section | status, [completed])`

El primer argumento es la sección, el nombre del elemento actual que contribuye al progreso o un objeto con claves como **section**, **subsection** & **completed** (o cualquier otro para el que tenga tipos en una plantilla personalizada).  Si no desea actualizar ni establecer ninguno de estos elementos, puede pasar `null` y esta parte se omitirá.

El segundo argumento es el porcentaje completado como un valor entre 0 y 1.
Sin este valor, la finalización no se actualiza. También observará que la finalización se puede pasar como parte de un objeto de estado como primer argumento. Si se pasan tanto este como el argumento completado, el argumento completado prevalece.

#### `gauge.hide([cb])`

Quita el medidor del terminal.  También puede devolver la llamada a `cb` después de que la E/S haya tenido la oportunidad de producirse (por el momento, esto solo significa después de que `setImmediate` haya devuelto la llamada).

Resulta que esto es importante cuando se pausa la barra de progreso en un identificador de archivos y se imprime en otro; de lo contrario, (con una impresión lo suficientemente grande) el nodo puede terminar imprimiendo los bits de la "barra de progreso final" en el identificador de archivos de la barra de progreso mientras se imprimen otros elementos en otro identificador de archivos. Estas intercalaciones pueden provocar daños en algunos terminales.

#### `gauge.pulse([subsection])`

* **subsection**: *(opcional)* el elemento específico que desencadenó este pulso

Gira el indicador girador en el medidor para mostrar la salida.  Si se incluye el objeto **subsection**, se combinará con el último nombre que se pasó a `gauge.show`.

#### `gauge.disable()`

Oculta el medidor y omite las futuras llamadas a `show` o `pulse`.

#### `gauge.enable()`

Muestra el medidor y reanuda la actualización cuando se llama a `show` o `pulse`.

#### `gauge.isEnabled()`

Devuelve true si el medidor está habilitado.

#### `gauge.setThemeset(themes)`

Cambie el conjunto de temas para seleccionar un tema. Igual que la opción `themes` que se usa en el constructor. El tema se volverá a elegir desde este conjunto de temas.

#### `gauge.setTheme(theme)`

Cambie el tema activo y se mostrará con la siguiente presentación o pulso. Puede ser:

* objeto theme, en cuyo caso no se usa **themes**.
* Nombre de un tema, que se buscará en el objeto *themes* actual.
* Objeto de configuración con cualquiera de las claves `hasUnicode`, `hasColor` o `platform`, que se usará para invalidar nuestras estimaciones al realizar una selección de tema predeterminado.

Si no se selecciona ningún tema, se selecciona un valor predeterminado mediante una combinación de nuestras mejores suposiciones en el sistema operativo, la compatibilidad con colores y la compatibilidad con unicode.

#### `gauge.setTemplate(template)`

Cambie la plantilla activa y se mostrará con la siguiente presentación o pulso.

### <a name="tracking-completion"></a>Seguimiento de la finalización

Si está trabajando en más de una tarea de la que quiere realizar un seguimiento de la finalización, es posible que te resulte útil la sección [¿Ya lo hemos conseguido?] relacionada con el tema.  El evento `change` se puede conectar al método `show` para obtener una interfaz de barra de progreso más tradicional.

[¿Ya lo hemos conseguido?]: https://www.npmjs.com/package/are-we-there-yet

### <a name="themes"></a>TEMAS

```
var themes = require('gauge/themes')

// fetch the default color unicode theme for this platform
var ourTheme = themes({hasUnicode: true, hasColor: true})

// fetch the default non-color unicode theme for osx
var ourTheme = themes({hasUnicode: true, hasColor: false, platform: 'darwin'})

// create a new theme based on the color ascii theme for this platform
// that brackets the progress bar with arrows
var ourTheme = themes.newTheme(theme(hasUnicode: false, hasColor: true}), {
  preProgressbar: '→',
  postProgressbar: '←'
})
```

El objeto devuelto por `gauge/themes` es una instancia de la clase `ThemeSet`.

```
var ThemeSet = require('gauge/theme-set')
var themes = new ThemeSet()
// or
var themes = require('gauge/themes')
var mythemes = themes.newThemeset() // creates a new themeset based on the default themes
```

#### <a name="themesopts"></a>themes(opts)
#### <a name="themesgetdefaultopts"></a>themes.getDefault(opts)

Los objetos theme son una función que captura el tema predeterminado en función de la plataforma, unicode y la compatibilidad con colores.

Options es un objeto con las propiedades siguientes:

* **hasUnicode**: si es true, captura un tema unicode; si no hay ningún tema unicode disponible, se usará un tema que no sea unicode.
* **hasColor**: si es true, captura un tema de color; si no hay ningún tema de color disponible, se usará un tema que no sea de color.
* **platform** (opcional): el valor predeterminado es `process.platform`.  Si no hay ninguna coincidencia de plataforma disponible, se usa `fallback` en su lugar.

Si no se encuentra ningún tema compatible, se producirá un error con un `code` de `EMISSINGTHEME`.

#### <a name="themesaddthemethemename-themeobj"></a>themes.addTheme(themeName, themeObj)
#### <a name="themesaddthemethemename-parenttheme-newtheme"></a>themes.addTheme(themeName, [parentTheme], newTheme)

Agrega un tema con nombre al conjunto de temas.  Puede pasar un objeto de tipo theme, tal y como devuelve `themes.newTheme`, o los argumentos que pasaría a `themes.newTheme`.

#### <a name="themesgetthemenames"></a>themes.getThemeNames()

Devuelve una lista de todos los nombres de los temas de este conjunto de temas. Apto para el uso con `themes.getTheme(…)`.

#### <a name="themesgetthemename"></a>themes.getTheme(name)

Devuelve el objeto theme de este conjunto de temas denominado `name`.

Si `name` no existe en este conjunto de temas, se producirá un error con un `code` de `EMISSINGTHEME`.

#### <a name="themessetdefaultopts-themename"></a>themes.setDefault([opts], themeName)

`opts` es un objeto con las propiedades siguientes.

* **platform**: el valor predeterminado es `'fallback'`.  Si el tema es específico de la plataforma, especifíquelo aquí con la plataforma de `process.platform`, por ejemplo, `win32`, `darwin`, etc.
* **hasUnicode**: el valor predeterminado es `false`. Si el tema usa unicode, debe establecerlo en true.
* **hasColor**: el valor predeterminado es `false`.  Si el tema usa color, debe establecerlo en true.

`themeName` es el nombre del tema (según se indica a `addTheme`) que se va a usar para este conjunto de `opts`.

#### <a name="themesnewthemeparenttheme-newtheme"></a>themes.newTheme([parentTheme,] newTheme)

Cree un nuevo objeto de tema basado en `parentTheme`.  Si no se proporciona ningún `parentTheme`, se definirá un tema principal mínimo que defina funciones para representar el indicador de actividad (indicador giratorio) y la barra de progreso (este elemento primario de reserva se define en `gauge/base-theme`).

newTheme debe ser un objeto vacío. Para empezar, analizaremos las propiedades definidas por los temas predeterminados:

* **preProgressbar**: se muestra antes de la barra de progreso, si es que esta se muestra.
* **postProgressbar**: se muestra después de la barra de progreso, si es que esta se muestra.
* **progressBarTheme**: el subtema pasado al representador de la barra de progreso. Es un objeto con las propiedades `complete` y `remaining`, que son las cadenas que desea repetir para esas secciones de la barra de progreso.
* **activityIndicatorTheme** : el tema del indicador de actividad (indicador giratorio), que puede ser una cadena en la que cada carácter es un paso diferente o una matriz de cadenas.
* **preSubsection**: se muestra como separador entre `section` y `subsection` cuando se imprime este último.

Por lo general, los temas pueden tener cualquier valor que sea válido para representar plantillas. Las propiedades del tema se usan cuando su nombre coincide con un tipo de la plantilla. Sus valores pueden ser:

* **cadenas y números**: se incluirán tal y como están.
* **función (valores, tema, ancho)**: debe devolver los elementos deseados en la salida.
  *values* es un objeto con valores proporcionados a través de `gauge.show`, *theme* es el tema específico de este elemento (consulte más información a continuación) o este objeto de tema, y *width* es el número de caracteres de ancho que debe tener el resultado.

Hay un par de prefijos especiales:

* **pre**: se muestra antes de la propiedad, si se muestra.
* **post**: se muestra después de la propiedad, si se muestra.

Y un sufijo especial:

* **Theme**: su valor se pasa a un elemento de tipo función como tema.

#### <a name="themesaddtoallthemestheme"></a>themes.addToAllThemes(theme)

Esto se *combina* `theme` en todos los temas definidos actualmente. También se agrega al tema primario predeterminado de este conjunto de temas, por lo que los futuros temas agregados a este conjunto de temas obtendrán los valores de `theme` de forma predeterminada.

#### <a name="themesnewthemeset"></a>themes.newThemeset()

Copia el conjunto de temas actual en uno nuevo.  Le permite heredar fácilmente un conjunto de temas de otro.

### <a name="templates"></a>PLANTILLAS

Una plantilla es una matriz de objetos y cadenas que, después de evaluarse, se convertirá en la línea del medidor.  El nombre de la plantilla predeterminada es:

```javascript
[
    {type: 'progressbar', length: 20},
    {type: 'activityIndicator', kerning: 1, length: 1},
    {type: 'section', kerning: 1, default: ''},
    {type: 'subsection', kerning: 1, default: ''}
]
```

Los distintos elementos de plantilla pueden ser **cadenas sin formato**, en cuyo caso se incluirán textualmente en la salida, u objetos con las siguientes propiedades:

* *el tipo* puede ser cualquiera de los siguientes más las claves que pase a `gauge.show` más las claves que tenga en un tema personalizado.
  * `section`: en qué gran proyecto está trabajando ahora.
  * `subsection`: en qué componente de ese proyecto está trabajando.
  * `activityIndicator`: muestra un indicador giratorio utilizando el objeto `activityIndicatorTheme` del tema activo.
  * `progressbar`: barra de progreso que representa el `completed` actual mediante el `progressbarTheme` del tema activo.
* *kerning* : número de espacios que deben estar entre este elemento y otros elementos si se muestra este elemento.
* *maxLength*: longitud máxima de este elemento. Si su valor es más largo, se truncará.
* *minLength*: longitud mínima de este elemento. Si su valor es más corto, se rellenará según el valor de *align*.
* *align*: (valor predeterminado: izquierda) los valores posibles son "izquierda", "derecha" y "centro". Funciona como cabría esperar de procesador de texto.
* *length*: proporciona un valor único para *minLength* y *maxLength*. Si se especifican tanto *length* como *minLength o *maxLength*, este último valor tiene prioridad.
* *value*: valor literal que se va a usar para este elemento de plantilla.
* *default*: valor predeterminado que se va a usar para este elemento de plantilla si no se pasó ningún otro valor.

### <a name="plumbing"></a>ASOCIACIÓN

Este es el método supersencillo, sin cero suposiciones y sin nada de magia interno que usa el medidor para implementar su interfaz normal.

```
var Plumbing = require('gauge/plumbing')
var gauge = new Plumbing(theme, template, width)
```

* **theme**: el tema que se va a usar.
* **template**: la plantilla que se va a usar.
* **width**: ancho que debe tener el medidor

#### `gauge.setTheme(theme)`

Cambie el tema activo.

#### `gauge.setTemplate(template)`

Cambie la plantilla activa.

#### `gauge.setWidth(width)`

Cambie el ancho con el que se va a representar.

#### `gauge.hide()`

Devuelva la cadena necesaria para ocultar la barra de progreso.

#### `gauge.hideCursor()`

Devuelva una cadena para ocultar el cursor.

#### `gauge.showCursor()`

Devuelva una cadena para mostrar el cursor.

#### `gauge.show(status)`

Si usa `status` para los valores, represente la plantilla proporcionada con el tema y devuelva una cadena adecuada para imprimir para actualizar el medidor.
