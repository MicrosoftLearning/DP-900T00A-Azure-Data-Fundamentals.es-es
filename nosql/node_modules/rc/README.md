---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052066"
---
# <a name="rc"></a>rc

Cargador de configuración no configurable para personas perezosas.

## <a name="usage"></a>Uso

La única opción es pasar a rc el nombre de la aplicación y la configuración predeterminada.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

`rc` devolverá las opciones de configuración combinadas con los valores predeterminados que especifique.
Si pasa un objeto predeterminado predefinido, se mutará:

```javascript
var conf = {};
require('rc')(appname, conf);
```

Si `rc` encuentra algún archivo de configuración para la aplicación, el objeto de configuración devuelto tendrá una matriz `configs` que contiene las rutas de acceso:

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>Estándares

Dado el nombre de la aplicación (`appname`), rc buscará en todos los lugares obvios para la configuración.

  * argumentos de línea de comandos, analizados por minimist _(por ejemplo `--foo baz`, también anidados: `--foo.bar=baz`)_
  * variables de entorno con el prefijo `${appname}_`
    * o use "\_\_" para indicar propiedades anidadas <br/> _(por ejemplo, `appname_foo__bar__baz` => `foo.bar.baz`)_
  * si ha pasado una opción `--config file` a partir de ese archivo
  * `.${appname}rc` local o el primero encontrado buscando en `./ ../ ../../ ../../../` etc.
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * el objeto predeterminado que ha pasado.

Todos los orígenes de configuración que se encontraron se aplanarán en un objeto, por lo que los orígenes **anteriores** en esta lista invalidan los posteriores.


## <a name="configuration-file-formats"></a>Formatos de archivo de configuración

Los archivos de configuración (por ejemplo, `.appnamerc`) pueden estar en formato [json](http://json.org/example) o [ini](http://en.wikipedia.org/wiki/INI_file). **No** se debe usar ninguna extensión de archivo (`.json` o `.ini`). Las configuraciones de ejemplo siguientes son equivalentes:


#### <a name="formatted-as-ini"></a>Con formato `ini`

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>Con formato `json`

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

Los comentarios se quitan de la configuración JSON a través de [strip-json-comments](https://github.com/sindresorhus/strip-json-comments).

> Dado que las variables ini y env no tienen un estándar para los tipos, la aplicación debe estar preparada para las cadenas.

Para asegurarse de que las representaciones de cadena de los valores booleanos y los números siempre se convierten en sus tipos adecuados (especialmente útil si piensa realizar comparaciones estrictas `===`), considere la posibilidad de usar un módulo como [parse-strings-in-object](https://github.com/anselanza/parse-strings-in-object) para encapsular el objeto de configuración devuelto de rc.


## <a name="simple-example-demonstrating-precedence"></a>Ejemplo sencillo que muestra la precedencia
Supongamos que tiene una aplicación como esta (observe los valores predeterminados codificados de forma rígida que se pasan a rc):
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
También tiene un archivo `config.json`, con estos contenidos:
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
Y un archivo `.myapprc` en la misma carpeta, con estos contenidos:
```
{
  "port": "3001",
  "foo": "bar"
}
```
Esta es la salida esperada de varios comandos:

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*El valor predeterminado `mode` del objeto codificado de forma rígida se conserva, pero el archivo `.myapprc` reemplaza el puerto (que se encuentra automáticamente en función de la coincidencia de appname) y se agrega `foo`.*


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*El mismo resultado que antes, pero `foo` se invalida porque los argumentos de la línea de comandos tienen prioridad sobre el archivo `.myapprc`.*

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
*Ahora `port` procede del archivo especificado `config.json` (invalidando el valor de `.myapprc`), y el valor `foo` se invalida mediante la línea de comandos a pesar de especificarse también en el archivo `config.json`.*
 


## <a name="advanced-usage"></a>Uso avanzado

#### <a name="pass-in-your-own-argv"></a>Paso de su propio `argv`

Puede pasar su propio `argv` como tercer argumento a `rc`.  Esto es en caso de que quiera [usar su propio analizador de línea de comandos](https://github.com/dominictarr/rc/pull/12).

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>Paso de su propio analizador

Si tiene una necesidad especial de usar un analizador no estándar, puede hacerlo pasando el analizador como el 4º argumento.
(deje el 3º como NULL para obtener el analizador de argumentos predeterminado)

```javascript
require('rc')(appname, defaults, null, parser);
```

También se puede usar para forzar un formato más estricto, como solo JSON estricto y válido.

## <a name="note-on-performance"></a>Nota sobre el rendimiento

`rc` está ejecutando `fs.statSync`, por lo que asegúrese de no usarlo en una ruta de acceso de código frecuente (por ejemplo, un controlador de solicitudes) 


## <a name="license"></a>Licencia

Licencia múltiple en la licencia de BSD de dos cláusulas, licencia de MIT o licencia de Apache, versión 2.0
