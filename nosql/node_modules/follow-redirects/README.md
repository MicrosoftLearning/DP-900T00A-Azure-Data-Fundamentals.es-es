---
ms.openlocfilehash: aa7ddb2f2ce7709064cf5157f709fc1eff52cff7
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052597"
---
## <a name="follow-redirects"></a>Seguir redireccionamientos

Reemplazo de drop-in para los módulos `http` y `https` de Node que siguen automáticamente las redirecciones.

[![versión npm](https://img.shields.io/npm/v/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Estado de compilación](https://github.com/follow-redirects/follow-redirects/workflows/CI/badge.svg)](https://github.com/follow-redirects/follow-redirects/actions)
[![Estado de cobertura](https://coveralls.io/repos/follow-redirects/follow-redirects/badge.svg?branch=master)](https://coveralls.io/r/follow-redirects/follow-redirects?branch=master)
[![descargas npm](https://img.shields.io/npm/dm/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Patrocinador en GitHub](https://img.shields.io/static/v1?label=Sponsor&message=%F0%9F%92%96&logo=GitHub)](https://github.com/sponsors/RubenVerborgh)

`follow-redirects` proporciona métodos [request](https://nodejs.org/api/http.html#http_http_request_options_callback) y [get](https://nodejs.org/api/http.html#http_http_get_options_callback) que se comportan de forma idéntica a los que se encuentran en los módulos [http](https://nodejs.org/api/http.html#http_http_request_options_callback) y [https](https://nodejs.org/api/https.html#https_https_request_options_callback) nativos, con la excepción de que seguirán sin problemas las redirecciones.

```javascript
const { http, https } = require('follow-redirects');

http.get('http://bit.ly/900913', response => {
  response.on('data', chunk => {
    console.log(chunk);
  });
}).on('error', err => {
  console.error(err);
});
```

Puede inspeccionar la dirección URL redirigida final a través de la `responseUrl` propiedad en `response`.
Si no se ha producido ningún redireccionamiento, `responseUrl` es la dirección URL de la solicitud original.

```javascript
const request = https.request({
  host: 'bitly.com',
  path: '/UHfDGO',
}, response => {
  console.log(response.responseUrl);
  // 'http://duckduckgo.com/robots.txt'
});
request.end();
```

## <a name="options"></a>Opciones
### <a name="global-options"></a>Opciones globales
Las opciones globales se establecen directamente en el módulo `follow-redirects`:

```javascript
const followRedirects = require('follow-redirects');
followRedirects.maxRedirects = 10;
followRedirects.maxBodyLength = 20 * 1024 * 1024; // 20 MB
```

Se admiten las siguientes opciones globales:

- `maxRedirects` (valor predeterminado: `21`) : establece el número máximo de redireccionamientos permitidos; si se supera, se emitirá un error.

- `maxBodyLength` (valor predeterminado: 10 MB): establece el tamaño máximo del cuerpo de la solicitud; si se supera, se emitirá un error.

### <a name="per-request-options"></a>Opciones por solicitud
Las opciones por solicitud se establecen pasando un objeto `options`:

```javascript
const url = require('url');
const { http, https } = require('follow-redirects');

const options = url.parse('http://bit.ly/900913');
options.maxRedirects = 10;
options.beforeRedirect = (options, { headers }) => {
  // Use this to adjust the request options upon redirecting,
  // to inspect the latest response headers,
  // or to cancel the request by throwing an error
  if (options.hostname === "example.com") {
    options.auth = "user:password";
  }
};
http.request(options);
```

Además de las opciones [HTTP](https://nodejs.org/api/http.html#http_http_request_options_callback) y [HTTPS](https://nodejs.org/api/https.html#https_https_request_options_callback) estándar, se admiten las siguientes opciones por solicitud:
- `followRedirects` (valor predeterminado: `true`) : si se deben seguir los redireccionamientos.

- `maxRedirects` (valor predeterminado: `21`) : establece el número máximo de redireccionamientos permitidos; si se supera, se emitirá un error.

- `maxBodyLength` (valor predeterminado: 10 MB): establece el tamaño máximo del cuerpo de la solicitud; si se supera, se emitirá un error.

- `beforeRedirect` (valor predeterminado: `undefined`) : opcionalmente, cambie la solicitud `options` en las redirecciones o anule la solicitud iniciando un error.

- `agents` (valor predeterminado: `undefined`) : establece la `agent` opción por protocolo, ya que HTTP y HTTPS usan diferentes agentes. Valor de ejemplo: `{ http: new http.Agent(), https: new https.Agent() }`

- `trackRedirects` (valor predeterminado: `false`) : si se almacenan los detalles de la respuesta redirigida en la matriz `redirects` en el objeto de respuesta.


### <a name="advanced-usage"></a>Uso avanzado
De forma predeterminada, `follow-redirects` usará las implementaciones predeterminadas de Node.js [`http`](https://nodejs.org/api/http.html) y [`https`](https://nodejs.org/api/https.html).
Para habilitar características como el almacenamiento en caché o el seguimiento intermedio de solicitudes, es posible que quiera encapsular `follow-redirects` en las implementaciones de protocolo personalizadas:

```javascript
const { http, https } = require('follow-redirects').wrap({
  http: require('your-custom-http'),
  https: require('your-custom-https'),
});
```

Estos protocolos personalizados solo necesitan una implementación del método `request`.

## <a name="browser-usage"></a>Uso del explorador

Debido a la forma en que funciona el explorador, los equivalentes del explorador `http` y `https` realizan redireccionamientos de forma predeterminada.

Al requerir `follow-redirects` de esta manera:
```javascript
const http = require('follow-redirects/http');
const https = require('follow-redirects/https');
```
puede indicar fácilmente a webpack y amigos que reemplacen `follow-redirect` por las versiones integradas:

```json
{
  "follow-redirects/http"  : "http",
  "follow-redirects/https" : "https"
}
```

## <a name="contributing"></a>Contribuciones

Las solicitudes de incorporación de cambios siempre son bienvenidas. Envíe [un problema](https://github.com/follow-redirects/follow-redirects/issues) que detalle su propuesta antes de invertir su tiempo valioso. Las características adicionales y las correcciones de errores deben ir acompañadas de pruebas. Puede ejecutar el conjunto de pruebas localmente con un comando simple `npm test`.

## <a name="debug-logging"></a>Depurar registro

`follow-redirects` usa la excelente [depuración](https://www.npmjs.com/package/debug) para el registro. Para activar el registro, establezca la variable de entorno `DEBUG=follow-redirects` para la salida de depuración solo desde este módulo. Al ejecutar el conjunto de pruebas, a veces resulta ventajoso establecer `DEBUG=*` para ver también la salida del servidor express.

## <a name="authors"></a>Authors

- [Ruben Verborgh](https://ruben.verborgh.org/)
- [Olivier Lalonde](mailto:olalonde@gmail.com)
- [James Talmage](mailto:james@talmage.io)

## <a name="license"></a>Licencia

[Licencia MIT](https://github.com/follow-redirects/follow-redirects/blob/master/LICENSE)
